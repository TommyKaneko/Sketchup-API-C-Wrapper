<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>SUAPI-CppWrapper: /home/travis/build/TommyKaneko/Sketchup-API-C-Wrapper/third-party/googletest/googletest/docs/V1_5_FAQ.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SUAPI-CppWrapper
   </div>
   <div id="projectbrief">C++WrapperforSketchUpCAPI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">/home/travis/build/TommyKaneko/Sketchup-API-C-Wrapper/third-party/googletest/googletest/docs/V1_5_FAQ.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;If you cannot find the answer to your question here, and you have read</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;[Primer](V1_5_Primer.md) and [AdvancedGuide](V1_5_AdvancedGuide.md), send it to</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;googletestframework@googlegroups.com.</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;## Why should I use Google Test instead of my favorite C++ testing framework? ##</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;First, let<span class="stringliteral">&#39;s say clearly that we don&#39;</span>t want to <span class="keyword">get</span> into the debate of</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;which C++ testing framework is **the best**.  There exist many fine</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;frameworks <span class="keywordflow">for</span> writing C++ tests, and we have tremendous respect <span class="keywordflow">for</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;the developers and users of them.  We don<span class="stringliteral">&#39;t think there is (or will</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="stringliteral">be) a single best framework - you have to pick the right tool for the</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="stringliteral">particular task you are tackling.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="stringliteral">We created Google Test because we couldn&#39;</span>t find the right combination</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;of features and conveniences in an existing framework to satisfy _our_</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;needs.  The following is a list of things that _we_ like about Google</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;Test.  We don<span class="stringliteral">&#39;t claim them to be unique to Google Test - rather, the</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="stringliteral">combination of them makes Google Test the choice for us.  We hope this</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="stringliteral">list can help you decide whether it is for you too.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="stringliteral">  * Google Test is designed to be portable.  It works where many STL types (e.g. `std::string` and `std::vector`) don&#39;</span>t compile.  It doesn<span class="stringliteral">&#39;t require exceptions or RTTI.  As a result, it runs on Linux, Mac OS X, Windows and several embedded operating systems.</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="stringliteral">  * Nonfatal assertions (`EXPECT_*`) have proven to be great time savers, as they allow a test to report multiple failures in a single edit-compile-test cycle.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="stringliteral">  * It&#39;</span>s easy to write assertions that generate informative messages: you just use the stream syntax to append any additional information, e.g. `ASSERT_EQ(5, Foo(i)) &lt;&lt; <span class="stringliteral">&quot; where i = &quot;</span> &lt;&lt; i;`.  It doesn<span class="stringliteral">&#39;t require a new set of macros or special functions.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="stringliteral">  * Google Test automatically detects your tests and doesn&#39;</span>t require you to enumerate them in order to run them.</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  * No framework can anticipate all your needs, so Google Test provides `EXPECT_PRED*` to make it easy to extend your assertion vocabulary.  For a nicer syntax, you can define your own assertion macros trivially in terms of `EXPECT_PRED*`.</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  * Death tests are pretty handy <span class="keywordflow">for</span> ensuring that your asserts in production code are triggered by the right conditions.</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  * `SCOPED_TRACE` helps you understand the context of an assertion failure when it comes from inside a sub-routine or loop.</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  * You can decide which tests to run <span class="keyword">using</span> name patterns.  This saves time when you want to quickly reproduce a test failure.</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;## How <span class="keywordflow">do</span> I generate 64-bit binaries on Windows (<span class="keyword">using</span> Visual Studio 2008)? ##</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;(Answered by Trevor Robinson)</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;Load the supplied Visual Studio solution file, either `msvc\gtest-md.sln` or</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;`msvc\gtest.sln`. Go through the migration wizard to migrate the</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;solution and project files to Visual Studio 2008. Select</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;`Configuration Manager...` from the `Build` menu. Select `&lt;New...&gt;` from</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;the `Active solution platform` dropdown.  Select `x64` from the <span class="keyword">new</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;platform dropdown, leave `Copy settings from` set to `Win32` and</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;`Create <span class="keyword">new</span> project platforms` checked, then click `OK`. You now have</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;`Win32` and `x64` platform configurations, selectable from the</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;`Standard` toolbar, which allow you to toggle between building 32-bit or</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;64-bit binaries (or both at once <span class="keyword">using</span> Batch Build).</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;In order to prevent build output files from overwriting one another,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;you<span class="stringliteral">&#39;ll need to change the `Intermediate Directory` settings for the</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="stringliteral">newly created platform configuration across all the projects. To do</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="stringliteral">this, multi-select (e.g. using shift-click) all projects (but not the</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="stringliteral">solution) in the `Solution Explorer`. Right-click one of them and</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="stringliteral">select `Properties`. In the left pane, select `Configuration Properties`,</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="stringliteral">and from the `Configuration` dropdown, select `All Configurations`.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="stringliteral">Make sure the selected platform is `x64`. For the</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="stringliteral">`Intermediate Directory` setting, change the value from</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="stringliteral">`$(PlatformName)\$(ConfigurationName)` to</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="stringliteral">`$(OutDir)\$(ProjectName)`. Click `OK` and then build the</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="stringliteral">solution. When the build is complete, the 64-bit binaries will be in</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="stringliteral">the `msvc\x64\Debug` directory.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="stringliteral">## Can I use Google Test on MinGW? ##</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="stringliteral">We haven&#39;</span>t tested <span class="keyword">this</span> ourselves, but Per Abrahamsen reported that he</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;was able to compile and install Google Test successfully when <span class="keyword">using</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;MinGW from Cygwin.  You<span class="stringliteral">&#39;ll need to configure it with:</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="stringliteral">`PATH/TO/configure CC=&quot;gcc -mno-cygwin&quot; CXX=&quot;g++ -mno-cygwin&quot;`</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="stringliteral">You should be able to replace the `-mno-cygwin` option with direct links</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="stringliteral">to the real MinGW binaries, but we haven&#39;</span>t tried that.</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;Caveats:</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  * There are many warnings when compiling.</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  * `make check` will produce some errors as not all tests <span class="keywordflow">for</span> Google Test itself are compatible with MinGW.</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;We also have reports on successful cross compilation of Google Test MinGW binaries on Linux <span class="keyword">using</span> [these instructions](http:<span class="comment">//wiki.wxwidgets.org/Cross-Compiling_Under_Linux#Cross-compiling_under_Linux_for_MS_Windows) on the WxWidgets site.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;Please contact `googletestframework@googlegroups.com` <span class="keywordflow">if</span> you are</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;interested in improving the support <span class="keywordflow">for</span> MinGW.</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;## Why does Google Test support EXPECT\_EQ(NULL, ptr) and ASSERT\_EQ(NULL, ptr) but not EXPECT\_NE(NULL, ptr) and ASSERT\_NE(NULL, ptr)? <span class="preprocessor">##</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;Due to some peculiarity of C++, it requires some non-trivial <span class="keyword">template</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;meta programming tricks to support <span class="keyword">using</span> `NULL` as an argument of the</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;`EXPECT_XX()` and `ASSERT_XX()` macros. Therefore we only <span class="keywordflow">do</span> it where</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;it<span class="stringliteral">&#39;s most needed (otherwise we make the implementation of Google Test</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="stringliteral">harder to maintain and more error-prone than necessary).</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="stringliteral">The `EXPECT_EQ()` macro takes the _expected_ value as its first</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="stringliteral">argument and the _actual_ value as the second. It&#39;</span>s reasonable that</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;someone wants to write `EXPECT_EQ(NULL, some_expression)`, and <span class="keyword">this</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;indeed was requested several times. Therefore we implemented it.</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;The need <span class="keywordflow">for</span> `EXPECT_NE(NULL, ptr)` isn<span class="stringliteral">&#39;t nearly as strong. When the</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="stringliteral">assertion fails, you already know that `ptr` must be `NULL`, so it</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="stringliteral">doesn&#39;</span>t add any information to print ptr in <span class="keyword">this</span> <span class="keywordflow">case</span>. That means</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;`EXPECT_TRUE(ptr ! NULL)` works just as well.</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;If we were to support `EXPECT_NE(NULL, ptr)`, <span class="keywordflow">for</span> consistency we<span class="stringliteral">&#39;ll</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="stringliteral">have to support `EXPECT_NE(ptr, NULL)` as well, as unlike `EXPECT_EQ`,</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="stringliteral">we don&#39;</span>t have a convention on the order of the two arguments <span class="keywordflow">for</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;`EXPECT_NE`. This means <span class="keyword">using</span> the <span class="keyword">template</span> meta programming tricks</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;twice in the implementation, making it even harder to understand and</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;maintain. We believe the benefit doesn<span class="stringliteral">&#39;t justify the cost.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="stringliteral">Finally, with the growth of Google Mock&#39;</span>s [matcher](../../CookBook.md#<span class="keyword">using</span>-matchers-in-google-test-assertions) library, we are</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;encouraging people to use the unified `EXPECT_THAT(value, matcher)`</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;syntax more often in tests. One significant advantage of the matcher</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;approach is that matchers can be easily combined to form <span class="keyword">new</span> matchers,</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keywordflow">while</span> the `EXPECT_NE`, etc, macros cannot be easily</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;combined. Therefore we want to invest more in the matchers than in the</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;`EXPECT_XX()` macros.</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;## Does Google Test support running tests in parallel? ##</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;Test runners tend to be tightly coupled with the build/test</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;environment, and Google Test doesn<span class="stringliteral">&#39;t try to solve the problem of</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="stringliteral">running tests in parallel.  Instead, we tried to make Google Test work</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="stringliteral">nicely with test runners.  For example, Google Test&#39;</span>s XML report</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;contains the time spent on each test, and its `gtest_list_tests` and</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;`gtest_filter` flags can be used <span class="keywordflow">for</span> splitting the execution of test</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;methods into multiple processes.  These functionalities can help the</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;test runner run the tests in parallel.</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;## Why don<span class="stringliteral">&#39;t Google Test run the tests in different threads to speed things up? ##</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="stringliteral">It&#39;</span>s difficult to write thread-safe code.  Most tests are not written</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;with thread-safety in mind, and thus may not work correctly in a</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;multi-threaded setting.</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;If you think about it, it<span class="stringliteral">&#39;s already hard to make your code work when</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="stringliteral">you know what other threads are doing.  It&#39;</span>s much harder, and</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;sometimes even impossible, to make your code work when you don<span class="stringliteral">&#39;t know</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="stringliteral">what other threads are doing (remember that test methods can be added,</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="stringliteral">deleted, or modified after your test was written).  If you want to run</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="stringliteral">the tests in parallel, you&#39;</span>d better run them in different processes.</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;## Why aren<span class="stringliteral">&#39;t Google Test assertions implemented using exceptions? ##</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="stringliteral">Our original motivation was to be able to use Google Test in projects</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="stringliteral">that disable exceptions.  Later we realized some additional benefits</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="stringliteral">of this approach:</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="stringliteral">  1. Throwing in a destructor is undefined behavior in C++.  Not using exceptions means Google Test&#39;</span>s assertions are safe to use in destructors.</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  1. The `EXPECT_*` family of macros will <span class="keywordflow">continue</span> even after a failure, allowing multiple failures in a `TEST` to be reported in a single run. This is a popular feature, as in C++ the edit-compile-test cycle is usually quite <span class="keywordtype">long</span> and being able to fixing more than one thing at a time is a blessing.</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  1. If assertions are implemented <span class="keyword">using</span> exceptions, a test may falsely ignore a failure <span class="keywordflow">if</span> it<span class="stringliteral">&#39;s caught by user code:</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="stringliteral">try { ... ASSERT_TRUE(...) ... }</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="stringliteral">catch (...) { ... }</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="stringliteral">The above code will pass even if the `ASSERT_TRUE` throws.  While it&#39;</span>s unlikely <span class="keywordflow">for</span> someone to write <span class="keyword">this</span> in a test, it<span class="stringliteral">&#39;s possible to run into this pattern when you write assertions in callbacks that are called by the code under test.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="stringliteral">The downside of not using exceptions is that `ASSERT_*` (implemented</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="stringliteral">using `return`) will only abort the current function, not the current</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="stringliteral">`TEST`.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="stringliteral">## Why do we use two different macros for tests with and without fixtures? ##</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="stringliteral">Unfortunately, C++&#39;</span>s macro system doesn<span class="stringliteral">&#39;t allow us to use the same</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="stringliteral">macro for both cases.  One possibility is to provide only one macro</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="stringliteral">for tests with fixtures, and require the user to define an empty</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="stringliteral">fixture sometimes:</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="stringliteral">class FooTest : public ::testing::Test {};</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="stringliteral">TEST_F(FooTest, DoesThis) { ... }</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="stringliteral">or</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="stringliteral">typedef ::testing::Test FooTest;</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="stringliteral">TEST_F(FooTest, DoesThat) { ... }</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="stringliteral">Yet, many people think this is one line too many. :-) Our goal was to</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="stringliteral">make it really easy to write tests, so we tried to make simple tests</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="stringliteral">trivial to create.  That means using a separate macro for such tests.</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="stringliteral">We think neither approach is ideal, yet either of them is reasonable.</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="stringliteral">In the end, it probably doesn&#39;</span>t matter much either way.</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;## Why don<span class="stringliteral">&#39;t we use structs as test fixtures? ##</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="stringliteral">We like to use structs only when representing passive data.  This</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="stringliteral">distinction between structs and classes is good for documenting the</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="stringliteral">intent of the code&#39;</span>s author.  Since test fixtures have logic like</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;`SetUp()` and `TearDown()`, they are better defined as classes.</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;## Why are death tests implemented as assertions instead of <span class="keyword">using</span> a test runner? ##</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;Our goal was to make death tests as convenient <span class="keywordflow">for</span> a user as C++</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;possibly allows.  In particular:</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  * The runner-style requires to split the information into two pieces: the definition of the death test itself, and the specification <span class="keywordflow">for</span> the runner on how to run the death test and what to expect.  The death test would be written in C++, <span class="keywordflow">while</span> the runner spec may or may not be.  A user needs to carefully keep the two in sync. `ASSERT_DEATH(statement, expected_message)` specifies all necessary information in one place, in one language, without boilerplate code. It is very declarative.</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  * `ASSERT_DEATH` has a similar syntax and error-reporting semantics as other Google Test assertions, and thus is easy to learn.</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  * `ASSERT_DEATH` can be mixed with other assertions and other logic at your will.  You are not limited to one death test per test method. For example, you can write something like:</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;```</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (FooCondition()) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      ASSERT_DEATH(Bar(), <span class="stringliteral">&quot;blah&quot;</span>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      ASSERT_EQ(5, Bar());</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;```</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;If you prefer one death test per test method, you can write your tests in that style too, but we don<span class="stringliteral">&#39;t want to impose that on the users.  The fewer artificial limitations the better.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="stringliteral">  * `ASSERT_DEATH` can reference local variables in the current function, and you can decide how many death tests you want based on run-time information.  For example,</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="stringliteral">    const int count = GetCount();  // Only known at run time.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="stringliteral">    for (int i = 1; i &lt;= count; i++) {</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="stringliteral">      ASSERT_DEATH({</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="stringliteral">        double* buffer = new double[i];</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="stringliteral">        ... initializes buffer ...</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="stringliteral">        Foo(buffer, i)</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="stringliteral">      }, &quot;blah blah&quot;);</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="stringliteral">The runner-based approach tends to be more static and less flexible, or requires more user effort to get this kind of flexibility.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="stringliteral">Another interesting thing about `ASSERT_DEATH` is that it calls `fork()`</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="stringliteral">to create a child process to run the death test.  This is lightening</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="stringliteral">fast, as `fork()` uses copy-on-write pages and incurs almost zero</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="stringliteral">overhead, and the child process starts from the user-supplied</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="stringliteral">statement directly, skipping all global and local initialization and</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="stringliteral">any code leading to the given statement.  If you launch the child</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="stringliteral">process from scratch, it can take seconds just to load everything and</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="stringliteral">start running if the test links to many libraries dynamically.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="stringliteral">## My death test modifies some state, but the change seems lost after the death test finishes. Why? ##</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="stringliteral">Death tests (`EXPECT_DEATH`, etc) are executed in a sub-process s.t. the</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="stringliteral">expected crash won&#39;</span>t kill the test program (i.e. the parent process). As a</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;result, any in-memory side effects they incur are observable in their</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;respective sub-processes, but not in the parent process. You can think of them</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;as running in a parallel universe, more or less.</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;## The compiler complains about <span class="stringliteral">&quot;undefined references&quot;</span> to some <span class="keyword">static</span> <span class="keyword">const</span> member variables, but I did define them in the <span class="keyword">class </span>body. What<span class="stringliteral">&#39;s wrong? ##</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="stringliteral">If your class has a static data member:</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="stringliteral">// foo.h</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="stringliteral">class Foo {</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="stringliteral">  ...</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="stringliteral">  static const int kBar = 100;</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="stringliteral">};</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="stringliteral">You also need to define it _outside_ of the class body in `foo.cc`:</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="stringliteral">const int Foo::kBar;  // No initializer here.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="stringliteral">Otherwise your code is **invalid C++**, and may break in unexpected ways. In</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="stringliteral">particular, using it in Google Test comparison assertions (`EXPECT_EQ`, etc)</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="stringliteral">will generate an &quot;undefined reference&quot; linker error.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="stringliteral">## I have an interface that has several implementations. Can I write a set of tests once and repeat them over all the implementations? ##</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="stringliteral">Google Test doesn&#39;</span>t yet have good support <span class="keywordflow">for</span> <span class="keyword">this</span> kind of tests, or</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;data-driven tests in general. We hope to be able to make improvements in <span class="keyword">this</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;area soon.</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;## Can I derive a test fixture from another? ##</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;Yes.</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;Each test fixture has a corresponding and same named test <span class="keywordflow">case</span>. This means only</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;one test <span class="keywordflow">case</span> can use a particular fixture. Sometimes, however, multiple test</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;cases may want to use the same or slightly different fixtures. For example, you</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;may want to make sure that all of a GUI library<span class="stringliteral">&#39;s test cases don&#39;</span>t leak</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;important system resources like fonts and brushes.</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;In Google Test, you share a fixture among test cases by putting the shared</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;logic in a base test fixture, then deriving from that base a separate fixture</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="keywordflow">for each</span> test <span class="keywordflow">case</span> that wants to use <span class="keyword">this</span> common logic. You then use `TEST_F()`</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;to write tests <span class="keyword">using</span> each derived fixture.</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;Typically, your code looks like <span class="keyword">this</span>:</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;```</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">// Defines a base test fixture.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="keyword">class </span>BaseTest : public ::testing::Test {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   ...</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;};</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">// Derives a fixture FooTest from BaseTest.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="keyword">class </span>FooTest : <span class="keyword">public</span> BaseTest {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetUp() {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      BaseTest::SetUp();  <span class="comment">// Sets up the base fixture first.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      ... additional set-up work ...</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> TearDown() {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      ... clean-up work <span class="keywordflow">for</span> FooTest ...</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      BaseTest::TearDown();  <span class="comment">// Remember to tear down the base fixture</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                             <span class="comment">// after cleaning up FooTest!</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    ... functions and variables <span class="keywordflow">for</span> FooTest ...</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;};</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">// Tests that use the fixture FooTest.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;TEST_F(FooTest, Bar) { ... }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;TEST_F(FooTest, Baz) { ... }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;... additional fixtures derived from BaseTest ...</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;```</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;If necessary, you can <span class="keywordflow">continue</span> to derive test fixtures from a derived fixture.</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;Google Test has no limit on how deep the hierarchy can be.</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;For a complete example <span class="keyword">using</span> derived test fixtures, see</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;`samples/sample5_unittest.cc`.</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;## My compiler complains <span class="stringliteral">&quot;void value not ignored as it ought to be.&quot;</span> What does <span class="keyword">this</span> mean? ##</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;You<span class="stringliteral">&#39;re probably using an `ASSERT_*()` in a function that doesn&#39;</span>t <span class="keywordflow">return</span> `<span class="keywordtype">void</span>`.</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;`ASSERT_*()` can only be used in `<span class="keywordtype">void</span>` functions.</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;## My death test hangs (or seg-faults). How <span class="keywordflow">do</span> I fix it? ##</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;In Google Test, death tests are run in a child process and the way they work is</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;delicate. To write death tests you really need to understand how they work.</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;Please make sure you have read this.</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;In particular, death tests don<span class="stringliteral">&#39;t like having multiple threads in the parent</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="stringliteral">process. So the first thing you can try is to eliminate creating threads</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="stringliteral">outside of `EXPECT_DEATH()`.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="stringliteral">Sometimes this is impossible as some library you must use may be creating</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="stringliteral">threads before `main()` is even reached. In this case, you can try to minimize</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="stringliteral">the chance of conflicts by either moving as many activities as possible inside</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="stringliteral">`EXPECT_DEATH()` (in the extreme case, you want to move everything inside), or</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="stringliteral">leaving as few things as possible in it. Also, you can try to set the death</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="stringliteral">test style to `&quot;threadsafe&quot;`, which is safer but slower, and see if it helps.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="stringliteral">If you go with thread-safe death tests, remember that they rerun the test</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="stringliteral">program from the beginning in the child process. Therefore make sure your</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="stringliteral">program can run side-by-side with itself and is deterministic.</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="stringliteral">In the end, this boils down to good concurrent programming. You have to make</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="stringliteral">sure that there is no race conditions or dead locks in your program. No silver</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="stringliteral">bullet - sorry!</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="stringliteral">## Should I use the constructor/destructor of the test fixture or the set-up/tear-down function? ##</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="stringliteral">The first thing to remember is that Google Test does not reuse the</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="stringliteral">same test fixture object across multiple tests. For each `TEST_F`,</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="stringliteral">Google Test will create a fresh test fixture object, _immediately_</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="stringliteral">call `SetUp()`, run the test, call `TearDown()`, and then</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="stringliteral">_immediately_ delete the test fixture object. Therefore, there is no</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="stringliteral">need to write a `SetUp()` or `TearDown()` function if the constructor</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="stringliteral">or destructor already does the job.</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="stringliteral">You may still want to use `SetUp()/TearDown()` in the following cases:</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="stringliteral">  * If the tear-down operation could throw an exception, you must use `TearDown()` as opposed to the destructor, as throwing in a destructor leads to undefined behavior and usually will kill your program right away. Note that many standard libraries (like STL) may throw when exceptions are enabled in the compiler. Therefore you should prefer `TearDown()` if you want to write portable tests that work with or without exceptions.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="stringliteral">  * The Google Test team is considering making the assertion macros throw on platforms where exceptions are enabled (e.g. Windows, Mac OS, and Linux client-side), which will eliminate the need for the user to propagate failures from a subroutine to its caller. Therefore, you shouldn&#39;</span>t use Google Test assertions in a destructor <span class="keywordflow">if</span> your code could run on such a platform.</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  * In a constructor or destructor, you cannot make a <span class="keyword">virtual</span> <span class="keyword">function</span> call on <span class="keyword">this</span> <span class="keywordtype">object</span>. (You can call a method declared as <span class="keyword">virtual</span>, but it will be statically bound.) Therefore, <span class="keywordflow">if</span> you need to call a method that will be overriden in a derived <span class="keyword">class</span>, you have to use `SetUp()/TearDown()`.</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;## The compiler complains <span class="stringliteral">&quot;no matching function to call&quot;</span> when I use ASSERT\_PREDn. How <span class="keywordflow">do</span> I fix it? ##</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;If the predicate <span class="keyword">function</span> you use in `ASSERT_PRED*` or `EXPECT_PRED*` is</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;overloaded or a <span class="keyword">template</span>, the compiler will have trouble figuring out which</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;overloaded version it should use. `ASSERT_PRED_FORMAT*` and</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;`EXPECT_PRED_FORMAT*` don<span class="stringliteral">&#39;t have this problem.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="stringliteral">If you see this error, you might want to switch to</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="stringliteral">`(ASSERT|EXPECT)_PRED_FORMAT*`, which will also give you a better failure</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="stringliteral">message. If, however, that is not an option, you can resolve the problem by</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="stringliteral">explicitly telling the compiler which version to pick.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="stringliteral">For example, suppose you have</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="stringliteral">bool IsPositive(int n) {</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="stringliteral">  return n &gt; 0;</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="stringliteral">bool IsPositive(double x) {</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="stringliteral">  return x &gt; 0;</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="stringliteral">you will get a compiler error if you write</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="stringliteral">EXPECT_PRED1(IsPositive, 5);</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="stringliteral">However, this will work:</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="stringliteral">EXPECT_PRED1(*static_cast&lt;bool (*)(int)&gt;*(IsPositive), 5);</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="stringliteral">(The stuff inside the angled brackets for the `static_cast` operator is the</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="stringliteral">type of the function pointer for the `int`-version of `IsPositive()`.)</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="stringliteral">As another example, when you have a template function</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="stringliteral">template &lt;typename T&gt;</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="stringliteral">bool IsNegative(T x) {</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="stringliteral">  return x &lt; 0;</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="stringliteral">you can use it in a predicate assertion like this:</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="stringliteral">ASSERT_PRED1(IsNegative*&lt;int&gt;*, -5);</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="stringliteral">Things are more interesting if your template has more than one parameters. The</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="stringliteral">following won&#39;</span>t compile:</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;```</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;ASSERT_PRED2(*GreaterThan&lt;int, int&gt;*, 5, 0);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;```</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;as the C++ pre-processor thinks you are giving `ASSERT_PRED2` 4 arguments,</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;which is one more than expected. The workaround is to wrap the predicate</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="keyword">function</span> in parentheses:</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;```</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;ASSERT_PRED2(*(GreaterThan&lt;int, int&gt;)*, 5, 0);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;```</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="preprocessor">## My compiler complains about &quot;ignoring return value&quot; when I call RUN\_ALL\_TESTS(). Why? ##</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;Some people had been ignoring the <span class="keywordflow">return</span> value of `RUN_ALL_TESTS()`. That is,</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;instead of</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;```</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="keywordflow">return</span> RUN_ALL_TESTS();</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;```</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;they write</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;```</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;RUN_ALL_TESTS();</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;```</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;This is wrong and dangerous. A test runner needs to see the <span class="keywordflow">return</span> value of</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;`RUN_ALL_TESTS()` in order to determine <span class="keywordflow">if</span> a test has passed. If your `main()`</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="keyword">function</span> ignores it, your test will be considered successful even <span class="keywordflow">if</span> it has a</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;Google Test assertion failure. Very bad.</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;To help the users avoid <span class="keyword">this</span> dangerous bug, the implementation of</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;`RUN_ALL_TESTS()` causes gcc to <span class="keyword">raise</span> <span class="keyword">this</span> warning, when the <span class="keywordflow">return</span> value is</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;ignored. If you see <span class="keyword">this</span> warning, the fix is simple: just make sure its value</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;is used as the <span class="keywordflow">return</span> value of `main()`.</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;## My compiler complains that a constructor (or destructor) cannot <span class="keywordflow">return</span> a value. What<span class="stringliteral">&#39;s going on? ##</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="stringliteral">Due to a peculiarity of C++, in order to support the syntax for streaming</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="stringliteral">messages to an `ASSERT_*`, e.g.</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="stringliteral">ASSERT_EQ(1, Foo()) &lt;&lt; &quot;blah blah&quot; &lt;&lt; foo;</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="stringliteral">we had to give up using `ASSERT*` and `FAIL*` (but not `EXPECT*` and</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="stringliteral">`ADD_FAILURE*`) in constructors and destructors. The workaround is to move the</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="stringliteral">content of your constructor/destructor to a private void member function, or</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="stringliteral">switch to `EXPECT_*()` if that works. This section in the user&#39;</span>s guide explains</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;it.</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;## My set-up <span class="keyword">function</span> is not called. Why? ##</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;C++ is <span class="keywordflow">case</span>-sensitive. It should be spelled as `SetUp()`.  Did you</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;spell it as `Setup()`?</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;Similarly, sometimes people spell `SetUpTestCase()` as `SetupTestCase()` and</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;wonder why it<span class="stringliteral">&#39;s never called.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="stringliteral">## How do I jump to the line of a failure in Emacs directly? ##</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="stringliteral">Google Test&#39;</span>s failure message format is understood by Emacs and many other</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;IDEs, like acme and XCode. If a Google Test message is in a compilation buffer</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;in Emacs, then it<span class="stringliteral">&#39;s clickable. You can now hit `enter` on a message to jump to</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="stringliteral">the corresponding source code, or use `C-x `` to jump to the next failure.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="stringliteral">## I have several test cases which share the same test fixture logic, do I have to define a new test fixture class for each of them? This seems pretty tedious. ##</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="stringliteral">You don&#39;</span>t have to. Instead of</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;```</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="keyword">class </span>FooTest : <span class="keyword">public</span> BaseTest {};</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;TEST_F(FooTest, Abc) { ... }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;TEST_F(FooTest, Def) { ... }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="keyword">class </span>BarTest : <span class="keyword">public</span> BaseTest {};</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;TEST_F(BarTest, Abc) { ... }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;TEST_F(BarTest, Def) { ... }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;```</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;you can simply `<span class="keyword">typedef</span>` the test fixtures:</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;```</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="keyword">typedef</span> BaseTest FooTest;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;TEST_F(FooTest, Abc) { ... }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;TEST_F(FooTest, Def) { ... }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="keyword">typedef</span> BaseTest BarTest;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;TEST_F(BarTest, Abc) { ... }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;TEST_F(BarTest, Def) { ... }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;```</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="preprocessor">## The Google Test output is buried in a whole bunch of log messages. What do I do? ##</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;The Google Test output is meant to be a concise and human-friendly report. If</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;your test generates textual output itself, it will mix with the Google Test</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;output, making it hard to read. However, there is an easy solution to <span class="keyword">this</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;problem.</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;Since most log messages go to stderr, we decided to let Google Test output go</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;to stdout. This way, you can easily separate the two <span class="keyword">using</span> redirection. For</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;example:</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;```</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;./my_test &gt; googletest_output.txt</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;```</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="preprocessor">## Why should I prefer test fixtures over global variables? ##</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;There are several good reasons:</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  1. It<span class="stringliteral">&#39;s likely your test needs to change the states of its global variables. This makes it difficult to keep side effects from escaping one test and contaminating others, making debugging difficult. By using fixtures, each test has a fresh set of variables that&#39;</span>s different (but with the same names). Thus, tests are kept independent of each other.</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  1. Global variables pollute the global <span class="keyword">namespace</span>.</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  1. Test fixtures can be reused via subclassing, which cannot be done easily with global variables. This is useful <span class="keywordflow">if</span> many test cases have something in common.</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;## How <span class="keywordflow">do</span> I test <span class="keyword">private</span> <span class="keyword">class </span>members without writing FRIEND\_TEST()s? ##</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;You should try to write testable code, which means classes should be easily</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;tested from their public interface. One way to achieve this is the Pimpl idiom:</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;you move all <span class="keyword">private</span> members of a class into a helper class, and make all</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;members of the helper class <span class="keyword">public</span>.</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;You have several other options that don&#39;t require using `FRIEND_TEST`:</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  * Write the tests as members of the fixture class:</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;```</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;class Foo {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span>FooTest;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  ...</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;};</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="keyword">class </span>FooTest : <span class="keyword">public</span> <a class="code" href="classtesting_1_1_test.html">::testing::Test</a> {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  ...</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="keywordtype">void</span> Test1() {...} <span class="comment">// This accesses private members of class Foo.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordtype">void</span> Test2() {...} <span class="comment">// So does this one.</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;};</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;TEST_F(FooTest, Test1) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  Test1();</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;}</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;TEST_F(FooTest, Test2) {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  Test2();</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;```</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  * In the fixture <span class="keyword">class</span>, write accessors <span class="keywordflow">for</span> the tested <span class="keyword">class</span><span class="stringliteral">&#39; private members, then use the accessors in your tests:</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="stringliteral">class Foo {</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="stringliteral">  friend class FooTest;</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="stringliteral">  ...</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="stringliteral">};</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="stringliteral">class FooTest : public ::testing::Test {</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="stringliteral"> protected:</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="stringliteral">  ...</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="stringliteral">  T1 get_private_member1(Foo* obj) {</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="stringliteral">    return obj-&gt;private_member1_;</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="stringliteral">};</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="stringliteral">TEST_F(FooTest, Test1) {</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="stringliteral">  ...</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="stringliteral">  get_private_member1(x)</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="stringliteral">  ...</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="stringliteral">  * If the methods are declared **protected**, you can change their access level in a test-only subclass:</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="stringliteral">class YourClass {</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="stringliteral">  ...</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="stringliteral"> protected: // protected access for testability.</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="stringliteral">  int DoSomethingReturningInt();</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="stringliteral">  ...</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="stringliteral">};</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="stringliteral">// in the your_class_test.cc file:</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="stringliteral">class TestableYourClass : public YourClass {</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="stringliteral">  ...</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="stringliteral"> public: using YourClass::DoSomethingReturningInt; // changes access rights</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="stringliteral">  ...</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="stringliteral">};</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="stringliteral">TEST_F(YourClassTest, DoSomethingTest) {</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="stringliteral">  TestableYourClass obj;</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="stringliteral">  assertEquals(expected_value, obj.DoSomethingReturningInt());</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="stringliteral">## How do I test private class static members without writing FRIEND\_TEST()s? ##</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="stringliteral">We find private static methods clutter the header file.  They are</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="stringliteral">implementation details and ideally should be kept out of a .h. So often I make</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="stringliteral">them free functions instead.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="stringliteral">Instead of:</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="stringliteral">// foo.h</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="stringliteral">class Foo {</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="stringliteral">  ...</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="stringliteral"> private:</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="stringliteral">  static bool Func(int n);</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="stringliteral">};</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="stringliteral">// foo.cc</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="stringliteral">bool Foo::Func(int n) { ... }</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="stringliteral">// foo_test.cc</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="stringliteral">EXPECT_TRUE(Foo::Func(12345));</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="stringliteral">You probably should better write:</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="stringliteral">// foo.h</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="stringliteral">class Foo {</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="stringliteral">  ...</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="stringliteral">};</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="stringliteral">// foo.cc</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="stringliteral">namespace internal {</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="stringliteral">  bool Func(int n) { ... }</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="stringliteral">// foo_test.cc</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="stringliteral">namespace internal {</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="stringliteral">  bool Func(int n);</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="stringliteral">EXPECT_TRUE(internal::Func(12345));</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="stringliteral">## I would like to run a test several times with different parameters. Do I need to write several similar copies of it? ##</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="stringliteral">No. You can use a feature called [value-parameterized tests](V1_5_AdvancedGuide.md#Value_Parameterized_Tests) which</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="stringliteral">lets you repeat your tests with different parameters, without defining it more than once.</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="stringliteral">## How do I test a file that defines main()? ##</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="stringliteral">To test a `foo.cc` file, you need to compile and link it into your unit test</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="stringliteral">program. However, when the file contains a definition for the `main()`</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="stringliteral">function, it will clash with the `main()` of your unit test, and will result in</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="stringliteral">a build error.</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="stringliteral">The right solution is to split it into three files:</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="stringliteral">  1. `foo.h` which contains the declarations,</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="stringliteral">  1. `foo.cc` which contains the definitions except `main()`, and</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="stringliteral">  1. `foo_main.cc` which contains nothing but the definition of `main()`.</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="stringliteral">Then `foo.cc` can be easily tested.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="stringliteral">If you are adding tests to an existing file and don&#39;</span>t want an intrusive change</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;like <span class="keyword">this</span>, there is a hack: just include the entire `foo.cc` file in your unit</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;test. For example:</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;```</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">// File foo_unittest.cc</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">// The headers section</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;...</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">// Renames main() in foo.cc to make room for the unit test main()</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;#define main FooMain</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="preprocessor">#include &quot;a/b/foo.cc&quot;</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">// The tests start here.</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;...</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;```</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;However, please remember <span class="keyword">this</span> is a hack and should only be used as the last</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;resort.</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;## What can the statement argument in ASSERT\_DEATH() be? <span class="preprocessor">##</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;`ASSERT_DEATH(_statement_, _regex_)` (or any death assertion macro) can be used</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;wherever `_statement_` is valid. So basically `_statement_` can be any C++</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;statement that makes sense in the current context. In particular, it can</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;reference global and/or local variables, and can be:</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  * a simple <span class="keyword">function</span> call (often the <span class="keywordflow">case</span>),</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  * a complex expression, or</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  * a compound statement.</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;&gt; Some examples are shown here:</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;```</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">// A death test can be a simple function call.</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;TEST(MyDeathTest, FunctionCall) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  ASSERT_DEATH(Xyz(5), <span class="stringliteral">&quot;Xyz failed&quot;</span>);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;}</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">// Or a complex expression that references variables and functions.</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;TEST(MyDeathTest, ComplexExpression) {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c = Condition();</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  ASSERT_DEATH((c ? Func1(0) : object2.Method(<span class="stringliteral">&quot;test&quot;</span>)),</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;               <span class="stringliteral">&quot;(Func1|Method) failed&quot;</span>);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;}</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">// Death assertions can be used any where in a function. In</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">// particular, they can be inside a loop.</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;TEST(MyDeathTest, InsideLoop) {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="comment">// Verifies that Foo(0), Foo(1), ..., and Foo(4) all die.</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 5; i++) {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    EXPECT_DEATH_M(Foo(i), <span class="stringliteral">&quot;Foo has \\d+ errors&quot;</span>,</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                   ::<a class="code" href="classtesting_1_1_message.html">testing::Message</a>() &lt;&lt; <span class="stringliteral">&quot;where i is &quot;</span> &lt;&lt; i);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;}</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">// A death assertion can contain a compound statement.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;TEST(MyDeathTest, CompoundStatement) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="comment">// Verifies that at lease one of Bar(0), Bar(1), ..., and</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="comment">// Bar(4) dies.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  ASSERT_DEATH({</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 5; i++) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      Bar(i);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  },</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="stringliteral">&quot;Bar has \\d+ errors&quot;</span>);}</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;```</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;`googletest_unittest.cc` contains more examples <span class="keywordflow">if</span> you are interested.</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;## What syntax does the regular expression in ASSERT\_DEATH use? ##</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;On POSIX systems, Google Test uses the POSIX Extended regular</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;expression syntax</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;(http:<span class="comment">//en.wikipedia.org/wiki/Regular_expression#POSIX_Extended_Regular_Expressions). On</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;Windows, it uses a limited variant of regular expression syntax. For</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;more details, see the [regular expression syntax](V1_5_AdvancedGuide.md#Regular_Expression_Syntax).</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;## I have a fixture <span class="keyword">class</span> Foo, but TEST\_F(Foo, Bar) gives me error <span class="stringliteral">&quot;no matching function for call to Foo::Foo()&quot;</span>. Why? ##</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;Google Test needs to be able to create objects of your test fixture <span class="keyword">class</span>, so</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;it must have a <span class="keywordflow">default</span> constructor. Normally the compiler will define one <span class="keywordflow">for</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;you. However, there are cases where you have to define your own:</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  * If you explicitly declare a non-<span class="keywordflow">default</span> constructor <span class="keywordflow">for</span> <span class="keyword">class</span> `Foo`, then you need to define a <span class="keywordflow">default</span> constructor, even <span class="keywordflow">if</span> it would be empty.</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  * If `Foo` has a <span class="keyword">const</span> non-<span class="keyword">static</span> data member, then you have to define the <span class="keywordflow">default</span> constructor _and_ initialize the <span class="keyword">const</span> member in the initializer list of the constructor. (Early versions of `gcc` doesn<span class="stringliteral">&#39;t force you to initialize the const member. It&#39;</span>s a bug that has been fixed in `gcc 4`.)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;## Why does ASSERT\_DEATH complain about previous threads that were already joined? ##</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;With the Linux pthread library, there is no turning back once you cross the</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;line from single thread to multiple threads. The first time you create a</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;thread, a manager thread is created in addition, so you <span class="keyword">get</span> 3, not 2, threads.</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;Later when the thread you create joins the main thread, the thread count</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;decrements by 1, but the manager thread will never be killed, so you still have</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;2 threads, which means you cannot safely run a death test.</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;The <span class="keyword">new</span> NPTL thread library doesn<span class="stringliteral">&#39;t suffer from this problem, as it doesn&#39;</span>t</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;create a manager thread. However, <span class="keywordflow">if</span> you don<span class="stringliteral">&#39;t control which machine your test</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="stringliteral">runs on, you shouldn&#39;</span>t depend on <span class="keyword">this</span>.</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;## Why does Google Test require the entire test <span class="keywordflow">case</span>, instead of individual tests, to be named FOODeathTest when it uses ASSERT\_DEATH? ##</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;Google Test does not interleave tests from different test cases. That is, it</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;runs all tests in one test <span class="keywordflow">case</span> first, and then runs all tests in the next test</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="keywordflow">case</span>, and so on. Google Test does <span class="keyword">this</span> because it needs to set up a test <span class="keywordflow">case</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;before the first test in it is run, and tear it down afterwords. Splitting up</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;the test <span class="keywordflow">case</span> would require multiple set-up and tear-down processes, which is</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;inefficient and makes the semantics unclean.</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;If we were to determine the order of tests based on test name instead of test</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="keywordflow">case</span> name, then we would have a problem with the following situation:</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;```</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;TEST_F(FooTest, AbcDeathTest) { ... }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;TEST_F(FooTest, Uvw) { ... }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;TEST_F(BarTest, DefDeathTest) { ... }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;TEST_F(BarTest, Xyz) { ... }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;```</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;Since `FooTest.AbcDeathTest` needs to run before `BarTest.Xyz`, and we don<span class="stringliteral">&#39;t</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="stringliteral">interleave tests from different test cases, we need to run all tests in the</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="stringliteral">`FooTest` case before running any test in the `BarTest` case. This contradicts</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="stringliteral">with the requirement to run `BarTest.DefDeathTest` before `FooTest.Uvw`.</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="stringliteral">## But I don&#39;</span>t like calling my entire test <span class="keywordflow">case</span> FOODeathTest when it contains both death tests and non-death tests. What <span class="keywordflow">do</span> I <span class="keywordflow">do</span>? ##</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;You don<span class="stringliteral">&#39;t have to, but if you like, you may split up the test case into</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="stringliteral">`FooTest` and `FooDeathTest`, where the names make it clear that they are</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="stringliteral">related:</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="stringliteral">class FooTest : public ::testing::Test { ... };</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="stringliteral">TEST_F(FooTest, Abc) { ... }</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="stringliteral">TEST_F(FooTest, Def) { ... }</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="stringliteral">typedef FooTest FooDeathTest;</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="stringliteral">TEST_F(FooDeathTest, Uvw) { ... EXPECT_DEATH(...) ... }</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="stringliteral">TEST_F(FooDeathTest, Xyz) { ... ASSERT_DEATH(...) ... }</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="stringliteral">## The compiler complains about &quot;no match for &#39;</span><span class="keyword">operator</span>&lt;&lt;<span class="stringliteral">&#39;&quot; when I use an assertion. What gives? ##</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="stringliteral">If you use a user-defined type `FooType` in an assertion, you must make sure</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="stringliteral">there is an `std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const FooType&amp;)` function</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="stringliteral">defined such that we can print a value of `FooType`.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="stringliteral">In addition, if `FooType` is declared in a name space, the `&lt;&lt;` operator also</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="stringliteral">needs to be defined in the _same_ name space.</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="stringliteral">## How do I suppress the memory leak messages on Windows? ##</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="stringliteral">Since the statically initialized Google Test singleton requires allocations on</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="stringliteral">the heap, the Visual C++ memory leak detector will report memory leaks at the</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="stringliteral">end of the program run. The easiest way to avoid this is to use the</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="stringliteral">`_CrtMemCheckpoint` and `_CrtMemDumpAllObjectsSince` calls to not report any</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="stringliteral">statically initialized heap objects. See MSDN for more details and additional</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="stringliteral">heap check/debug routines.</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="stringliteral">## I am building my project with Google Test in Visual Studio and all I&#39;</span>m getting is a bunch of linker errors (or warnings). Help! ##</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;You may <span class="keyword">get</span> a number of the following linker error or warnings <span class="keywordflow">if</span> you</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;attempt to link your test project with the Google Test library when</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;your project and the are not built <span class="keyword">using</span> the same compiler settings.</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  * LNK2005: symbol already defined in <span class="keywordtype">object</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  * LNK4217: locally defined symbol <span class="stringliteral">&#39;symbol&#39;</span> imported in <span class="keyword">function</span> <span class="stringliteral">&#39;function&#39;</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  * LNK4049: locally defined symbol <span class="stringliteral">&#39;symbol&#39;</span> imported</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;The Google Test project (gtest.vcproj) has the Runtime Library option</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;set to /MT (use multi-threaded static libraries, /MTd for debug). If</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;your project uses something else, for example /MD (use multi-threaded</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;DLLs, /MDd for debug), you need to change the setting in the Google</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;Test project to match your project&#39;s.</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;To update this setting open the project properties in the Visual</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;Studio IDE then select the branch Configuration Properties | C/C++ |</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;Code Generation and change the option &quot;Runtime Library&quot;.  You may also try</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;using gtest-md.vcproj instead of gtest.vcproj.</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="preprocessor">## I put my tests in a library and Google Test doesn&#39;t run them. What&#39;s happening? ##</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="preprocessor"></span>Have you read a</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;[warning](V1_5_Primer.md#important-note-<span class="keywordflow">for</span>-visual-c-users) on</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;the Google Test Primer page?</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;## I want to use Google Test with Visual Studio but don<span class="stringliteral">&#39;t know where to start. ##</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="stringliteral">Many people are in your position and one of the posted his solution to</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="stringliteral">our mailing list. Here is his link:</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="stringliteral">http://hassanjamilahmad.blogspot.com/2009/07/gtest-starters-help.html.</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="stringliteral">## My question is not covered in your FAQ! ##</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="stringliteral">If you cannot find the answer to your question in this FAQ, there are</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="stringliteral">some other resources you can use:</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="stringliteral">  1. read other [wiki pages](http://code.google.com/p/googletest/w/list),</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="stringliteral">  1. search the mailing list [archive](http://groups.google.com/group/googletestframework/topics),</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="stringliteral">  1. ask it on [googletestframework@googlegroups.com](mailto:googletestframework@googlegroups.com) and someone will answer it (to prevent spam, we require you to join the [discussion group](http://groups.google.com/group/googletestframework) before you can post.).</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="stringliteral">Please note that creating an issue in the</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="stringliteral">[issue tracker](http://code.google.com/p/googletest/issues/list) is _not_</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="stringliteral">a good way to get your answer, as it is monitored infrequently by a</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="stringliteral">very small number of people.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="stringliteral">When asking a question, it&#39;</span>s helpful to provide as much of the</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;following information as possible (people cannot help you <span class="keywordflow">if</span> there<span class="stringliteral">&#39;s</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="stringliteral">not enough information in your question):</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="stringliteral">  * the version (or the revision number if you check out from SVN directly) of Google Test you use (Google Test is under active development, so it&#39;</span>s possible that your problem has been solved in a later version),</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  * your operating system,</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  * the name and version of your compiler,</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  * the complete command line flags you give to your compiler,</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  * the complete compiler error messages (<span class="keywordflow">if</span> the question is about compilation),</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  * the _actual_ code (ideally, a minimal but complete program) that has the problem you encounter.</div>
<div class="ttc" id="classtesting_1_1_test_html"><div class="ttname"><a href="classtesting_1_1_test.html">testing::Test</a></div><div class="ttdef"><b>Definition:</b> <a href="gtest_8h_source.html#l00371">gtest.h:371</a></div></div>
<div class="ttc" id="classtesting_1_1_message_html"><div class="ttname"><a href="classtesting_1_1_message.html">testing::Message</a></div><div class="ttdef"><b>Definition:</b> <a href="gtest-message_8h_source.html#l00085">gtest-message.h:85</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 24 2018 12:13:43 for SUAPI-CppWrapper by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
